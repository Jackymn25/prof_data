
# UTM Professor Data Analysis

A tool for scraping and analyzing data from [RateMyProfessors](https://www.ratemyprofessors.com/), using Bayesian averaging to rank professors at the University of Toronto Mississauga (UTM) by rating and difficulty, with visualized results.

## Project Structure

- `update.py`:  
  Responsible for scraping professor information and all comments from RateMyProfessors, saving them to a local JSON file.

- `system_class.py`:  
  Defines four core classes: `University`, `Department`, `ProfData`, and `CourseUnderProf` to manage data for schools, departments, professors, and courses.

- `analysis.py`:  
  Provides Bayesian scoring calculations and functions for statistical analysis and visualization of professor and department ratings/difficulty.

- `main.py`:  
  Main program. Supports data backup, updates, and plotting of overall and department-specific rankings.

## Installation

Install the required Python libraries:

```bash
pip install -r requirements.txt
```

> **Note**:  
> - `matplotlib` is used for plotting graphs.  
> - `requests` and `fake_useragent` are used for web scraping.  

## Usage

1. Preparation:

   - Ensure that `data/` and `data/data_copy/` directories exist in the project root.
   - Ensure `data/all_prof_data.json` is present (can be generated by running `update.py`).

2. Run the main program:

Note: Must update for first run!
```bash
python main.py
```

```bash
Would you like to update? (y/n)
```
Enter 'y' for first run.

Follow the prompts:

- Choose whether to update data (updates will re-scrape all professors and comments and backup old data).
- Enter your department name (fuzzy matching supported) to generate professor ranking plots by rating and difficulty.

3. Data Updating:
   - Automatically backs up the current `all_prof_data.json` to `data_copy` directory during runtime.
   - If updating is selected, it re-scrapes and overwrites the latest data.

## Key Features

- **Full Professor and Comment Scraping**  
  Supports paginated scraping of all UTM professors and course comments on RateMyProfessors.

- **Bayesian Weighted Ranking**  
  Uses Bayesian averaging to balance scores and review counts, preventing biases from small sample sizes.

- **Visualization**  
  Supports plotting:
  - Top 50 lowest-rated professors university-wide
  - Top 50 most difficult professors university-wide
  - Department average ratings and difficulties
  - Internal rankings for professors within a selected department

- **Modular Design**  
  Easy to extend to other schools or add more statistical and analytical features.

## Example Screenshot

Below are three example plots generated data collected.

![Difficulty Ranking Chart](https://raw.githubusercontent.com/Jackymn25/utm-professor-analysis-rmp/main/plots/pic_2.png)

![Difficulty Ranking Chart](https://raw.githubusercontent.com/Jackymn25/utm-professor-analysis-rmp/main/plots/pic_1.png)

![Difficulty Ranking Chart](https://raw.githubusercontent.com/Jackymn25/utm-professor-analysis-rmp/main/plots/myplot1.png)

## Notes

- **RateMyProfessors Access Limitations**: Set reasonable delays when scraping (this project uses 1.5 seconds/request) to avoid IP bans.
- **Cookie Settings**: If authorized data access is required, configure your own Cookie information in `update.py`.
- **For educational and research purposes only.**
